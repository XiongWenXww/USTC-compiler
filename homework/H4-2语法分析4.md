**3.19** 

**考虑下面的文法**  

**E –> E + T | T**  

**T –> T F | F**  

**F –> F* | a | b** 

**(a) 为此文法构造SLR分析表。** 

**(b) 为此文法构造LALR分析表。**

(a)

Follow(E')={ $ }

Follow(E)={ + , $ }

Follow(T)={ a , b , + , $ }

Follow(F)={ * , a , b , + , $ }

此文法的SLR的DFA如下图：

![img](file:///C:\Users\Eiffel\Documents\Tencent Files\3273693574\Image\C2C\F9008B5A0FBFC881AC9F517A792B30C4.png)



故得SLR分析表

|          |      |      | 动作 |      |      |      | 移进 |      |
| :------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| **状态** |  +   |  *   |  a   |  b   |  $   |  E   |  T   |  F   |
|    0     |      |      | S~4~ | S~5~ |      |  1   |  2   |  3   |
|    1     | S~6~ |      |      |      | acc  |      |      |      |
|    2     | r~2~ |      | S~4~ | S~5~ | r~2~ |      |      |  7   |
|    3     | r~4~ | S~8~ | r~4~ | r~4~ | r~4~ |      |      |      |
|    4     | r~6~ | r~6~ | r~6~ | r~6~ | r~6~ |      |      |      |
|    5     | r~7~ | r~7~ | r~7~ | r~7~ | r~7~ |      |      |      |
|    6     |      |      | S~4~ | S~5~ |      |      |  9   |  3   |
|    7     | r~3~ | S~8~ | r~3~ | r~3~ | r~3~ |      |      |      |
|    8     | r~5~ | r~5~ | r~5~ | r~5~ | r~5~ |      |      |      |
|    9     | r~1~ |      | S~4~ | S~5~ | r~1~ |      |      |  7   |

(b)

此文法的LALR的DFA如下图：

![img](file:///C:\Users\Eiffel\Documents\Tencent Files\3273693574\Image\C2C\E134241D470E2BD01F62F48586D2CC76.png)

故得LALR分析表

|          |      |      | 动作 |      |      |      | 移进 |      |
| :------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| **状态** |  +   |  *   |  a   |  b   |  $   |  E   |  T   |  F   |
|    0     |      |      | S~4~ | S~5~ |      |  1   |  2   |  3   |
|    1     | S~6~ |      |      |      | acc  |      |      |      |
|    2     | r~2~ |      | S~4~ | S~5~ | r~2~ |      |      |  7   |
|    3     | r~4~ | S~8~ | r~4~ | r~4~ | r~4~ |      |      |      |
|    4     | r~6~ | r~6~ | r~6~ | r~6~ | r~6~ |      |      |      |
|    5     | r~7~ | r~7~ | r~7~ | r~7~ | r~7~ |      |      |      |
|    6     |      |      | S~4~ | S~5~ |      |      |  9   |  3   |
|    7     | r~3~ | S~8~ | r~3~ | r~3~ | r~3~ |      |      |      |
|    8     | r~5~ | r~5~ | r~5~ | r~5~ | r~5~ |      |      |      |
|    9     | r~1~ |      | S~4~ | S~5~ | r~1~ |      |      |  7   |

**3.31** 

**下面两个文法中哪一个不是LR(1)文法？对非LR(1)的那个文法，给出那个有移进-归约冲突的规范的LR(1)项目集。**  

**S -> a A c**         **A -> A b b | b  **

**S -> a A c**         **A -> b A b | b**

文法

S -> a A c         

A -> A b b | b  

的LR(1)自动机如图所示，没有移进-归约冲突、归约-归约冲突，故是LR(1)文法

![img](file:///C:\Users\Eiffel\Documents\Tencent Files\3273693574\Image\C2C\75C11CA06D890FB1A0AEE2D12CA1D4B8.png)

文法

S -> a A c         

A -> b A b | b  

的部分LR(1)自动机如图所示，

![img](file:///C:\Users\Eiffel\Documents\Tencent Files\3273693574\Image\C2C\261DA3566508659A0E6F1482462DE969.png)

其中，状态7中，A -> b ^.^ 遇 b 归约，而A -> ^.^ bAb , A -> ^.^ b 遇 b 移进，有移进-归约冲突，故不是LR(1)文法

有移进-归约冲突的规范的LR(1)项目集为：

A -> b ^.^ Ab , b

A -> b ^.^ , b

A -> ^.^ bAb , b

A -> ^.^ b , b
